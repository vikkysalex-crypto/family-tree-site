{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/okevi/Desktop/Developments/family-tree-site/lib/supabase/client.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL as string,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY as string\r\n)\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,WAAW,IAAA,8LAAY"}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/okevi/Desktop/Developments/family-tree-site/providers/auth-provider.tsx"],"sourcesContent":["\"use client\"   // ✅ Must be at the very top\r\n\r\nimport { createContext, useContext } from \"react\"\r\nimport { supabase } from \"@/lib/supabase/client\"\r\n\r\nexport const AuthContext = createContext<any>({})\r\n\r\nexport const AuthProvider = ({ children }: { children: React.ReactNode }) => {\r\n  const register = async (\r\n    email: string,\r\n    password: string,\r\n    firstName: string,\r\n    lastName: string,\r\n    otherName?: string,\r\n    dob?: string,\r\n    nationality?: string,\r\n    phone?: string\r\n  ) => {\r\n    // 1️⃣ Sign up with Supabase Auth\r\n    const { data, error } = await supabase.auth.signUp({\r\n      email,\r\n      password,\r\n    })\r\n\r\n    if (error) throw error\r\n\r\n    const authId = data.user?.id\r\n    if (!authId) throw new Error(\"User ID not found after signup\")\r\n\r\n    // 2️⃣ Insert into 'users' table\r\n    const { error: dbError } = await supabase.from(\"users\").insert({\r\n      auth_id: authId,\r\n      first_name: firstName,\r\n      last_name: lastName,\r\n      other_name: otherName || null,\r\n      email,\r\n      phone: phone || null,\r\n      nationality: nationality || null,\r\n      dob: dob || null,\r\n    })\r\n\r\n    if (dbError) throw dbError\r\n\r\n    return data.user\r\n  }\r\n\r\n  const login = async (email: string, password: string) => {\r\n    const { data, error } = await supabase.auth.signInWithPassword({ email, password })\r\n    if (error) throw error\r\n    return data.user\r\n  }\r\n\r\n  const logout = async () => {\r\n    const { error } = await supabase.auth.signOut()\r\n    if (error) throw error\r\n  }\r\n\r\n  const value = { register, login, logout }\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>\r\n}\r\n\r\nexport const useAuth = () => useContext(AuthContext)\r\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AAHA,cAAe,4BAA4B;;;;AAKpC,MAAM,4BAAc,IAAA,sNAAa,EAAM,CAAC;AAExC,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAiC;IACtE,MAAM,WAAW,OACf,OACA,UACA,WACA,UACA,WACA,KACA,aACA;QAEA,iCAAiC;QACjC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,qIAAQ,CAAC,IAAI,CAAC,MAAM,CAAC;YACjD;YACA;QACF;QAEA,IAAI,OAAO,MAAM;QAEjB,MAAM,SAAS,KAAK,IAAI,EAAE;QAC1B,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;QAE7B,gCAAgC;QAChC,MAAM,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,qIAAQ,CAAC,IAAI,CAAC,SAAS,MAAM,CAAC;YAC7D,SAAS;YACT,YAAY;YACZ,WAAW;YACX,YAAY,aAAa;YACzB;YACA,OAAO,SAAS;YAChB,aAAa,eAAe;YAC5B,KAAK,OAAO;QACd;QAEA,IAAI,SAAS,MAAM;QAEnB,OAAO,KAAK,IAAI;IAClB;IAEA,MAAM,QAAQ,OAAO,OAAe;QAClC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,qIAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;YAAE;YAAO;QAAS;QACjF,IAAI,OAAO,MAAM;QACjB,OAAO,KAAK,IAAI;IAClB;IAEA,MAAM,SAAS;QACb,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,qIAAQ,CAAC,IAAI,CAAC,OAAO;QAC7C,IAAI,OAAO,MAAM;IACnB;IAEA,MAAM,QAAQ;QAAE;QAAU;QAAO;IAAO;IAExC,qBAAO,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC9C;AAEO,MAAM,UAAU,IAAM,IAAA,mNAAU,EAAC"}}]
}